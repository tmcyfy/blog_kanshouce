<!DOCTYPE html><html lang="zh-CN"><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><meta name="author" content="Louis,liuqichao@liuqichao.com"><title>Mac安装hexo爬坑 · 手册</title><meta name="description" content="本文目录




安装前必读
Git常见问题
一些有趣的插件：





文首语    

努力让每个跌在Hexo坑里的人爬起来 ==!。


Hexo是一个基于Nodo.js的轻量级博客框架，中文的官方文档可以看这里（这里也包括了如何安装和使用），但是建议在安装前阅读本文，以减少可能的安装与应用错"><meta name="keywords" content="Life,HTML,CSS,android,Linux"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="renderer" content="webkit"><link rel="short icon" href="/images/favicon.png" type="image/x-icon"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/blog_basic.css"><link rel="stylesheet" href="/css/font-awesome.min.css"><link rel="alternate" type="application/atom+xml" title="ATOM 1.0" href="/atom.xml"></head><body><div class="sidebar animated fadeInDown"><div class="logo-title"><div class="title"><img src="/images/logo@2x.png" style="width:127px;"><h3 title=""><a href="/">手册</a></h3><div class="description"><p>Nothing lasts forever.</p></div></div></div><ul class="social-links"><li><a href="/atom.xml"><i class="fa fa-rss"></i></a></li></ul><div class="footer"><div class="by_farbox"><a href="#">粤ICP备13034981号-2</a><div class="by_farbox"></div><sine>2016</sine></div></div></div><div class="main"><div class="page-top animated fadeInDown"><div class="nav"><li><a href="/">首页</a></li><li><a href="/about">关于</a></li><li><a href="/archives">归档</a></li><li><a href="/links">友链</a></li><li><a href="/reader">阅读者</a></li><li><a href="/node">Node</a></li></div><div class="information"><div class="back_btn"><li><a onclick="window.history.go(-1)" class="fa fa-chevron-left"> </a></li></div><div class="avatar"><img src="/images/favicon.png"></div></div></div><div class="autopagerize_page_element"><div class="content"><div class="post-page"><div class="post animated fadeInDown"><div class="post-title"><h3><a>Mac安装hexo爬坑</a></h3></div><div class="post-content"><p>本文目录</p>
<div class="toc">

<!-- toc -->
<ul>
<li><a href="#an-zhuang-qian-bi-du">安装前必读</a></li>
<li><a href="#git-chang-jian-wen-ti">Git常见问题</a></li>
<li><a href="#yi-xie-you-qu-de-cha-jian">一些有趣的插件：</a></li>
</ul>
<!-- tocstop -->
</div>


<p>文首语    </p>
<blockquote>
<p>努力让每个跌在Hexo坑里的人爬起来 ==!。</p>
</blockquote>
<a id="more"></a>
<p>Hexo是一个基于Nodo.js的轻量级博客框架，<a href="https://hexo.io/zh-cn/docs/index.html" target="_blank" rel="external">中文的官方文档</a>可以看这里（这里也包括了如何安装和使用），但是建议在安装前阅读本文，以减少可能的安装与应用错误。    </p>
<!--toc-->
<p>Hexo在masOS上的主要问题就两个：</p>
<ul>
<li>Git</li>
<li>权限（主要集中在NPM上）</li>
</ul>
<h3><span id="an-zhuang-qian-bi-du">安装前必读</span></h3><h4><span id="huan-jing">环境</span></h4><ul>
<li><p>macOS在安装前务必安装好<code>Xcode</code>，如果不安装好，有可能出现各种编译问题，包括<code>git</code>命令，实际上都需要<code>Xcode</code>支持。    </p>
</li>
<li><p><code>npm</code>的安装，不解释，官方源不能用，所以初步在安装完<code>nodo.js</code>后，推荐立刻将<code>npm</code>源更新为淘宝源，这里提供了三种方案：    </p>
</li>
</ul>
<p>通过config命令：    </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">$ npm config <span class="built_in">set</span> registry https://registry.npm.taobao.org</div><div class="line">$ npm info underscore //如果上面配置正确这个命令会有字符串response</div></pre></td></tr></table></figure>
<p>通过命令行进行指定：    </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ npm --registry https://registry.npm.taobao.org info underscore</div></pre></td></tr></table></figure>
<p>编辑~/.npmrc加入以下内容（淘宝源）：     </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">registry = https://registry.npm.taobao.org</div></pre></td></tr></table></figure>
<p>以上三种方案只需要配置一次即可。 </p>
<blockquote>
<p>注意，如果你在国内，这一步是必要的。否则在使用NPM的路上，呵呵呵。    </p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">&#123; [Error: Cannot find module <span class="string">'./build/Release/DTraceProviderBindings'</span>] code: <span class="string">'MODULE_NOT_FOUND'</span> &#125;</div><div class="line">&#123; [Error: Cannot find module <span class="string">'./build/default/DTraceProviderBindings'</span>] code: <span class="string">'MODULE_NOT_FOUND'</span> &#125;</div><div class="line">&#123; [Error: Cannot find module <span class="string">'./build/Debug/DTraceProviderBindings'</span>] code: <span class="string">'MODULE_NOT_FOUND'</span> &#125;</div></pre></td></tr></table></figure>
<p>这三行错误是因为 <code>DTrace 错误 （Mac OS X）</code>。</p>
<p>在此基础上，官方给出了一个简洁的安装方案，只需要执行:     </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ sudo npm install hexo —no-optional</div></pre></td></tr></table></figure>
<p>简洁安装hexo。    </p>
<p>而实际上，只要：</p>
<blockquote>
<p>用国内源把<code>dtrace-prodider</code>这个插件装好，或者找到之前<code>node_modules</code>，放到新的目录下，大约50MB。</p>
</blockquote>
<p>所以在安装、使用时遇到错误，请记得用国内淘宝源进行更新，比如说会遇到的<code>swig</code>报错，需要用npm重新安装、升级。</p>
<h4><span id="ming-ling-quan-xian">命令权限</span></h4><p>关于频繁输入<code>SUDO</code>的问题：</p>
<p>//2017.07.31更新</p>
<p>NPM在安装node.js和一些组件的时候，在Mac上需要正确的权限安装，正确安装后，执行命令无需再<code>sudo</code>，按照官方推荐的方案<a href="https://docs.npmjs.com/getting-started/fixing-npm-permissions" target="_blank" rel="external">官方文档戳我</a>：</p>
<p>文章列出了两种方法，第一种就是修改 <code>/usr/local/node_modules</code>、<code>/usr/local/bin</code> 和 <code>/usr/local/share</code> 这三个目录的 owner：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ sudo chown -R $(whoami) $(npm config get prefix)/&#123;lib/node_modules,bin,share&#125;</div></pre></td></tr></table></figure>
<p>这种方法适合这台电脑只有一个开发者使用的场景。</p>
<p>但是我司还有一台电脑是公共的，可以让不同的开发者临时使用，那么就是用方法二：     </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">$ mkdir ~/.npm-global</div><div class="line">$ npm config <span class="built_in">set</span> prefix <span class="string">'~/.npm-global'</span></div></pre></td></tr></table></figure>
<p>然后修改你的 .profile 或者 .zshrc(像我这样用zsh的话)，添加：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ <span class="built_in">export</span> PATH=~/.npm-global/bin:<span class="variable">$PATH</span></div></pre></td></tr></table></figure>
<p>根据 <code>~/.profile</code> 内容更新当前 Shell：     </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ <span class="built_in">source</span> ~/.profile`</div></pre></td></tr></table></figure>
<p>从此以后 <code>npm install -g</code> 安装的模块就都会到该用户名字下面的 <code>~/.npm-global</code> 目录中，这样就做到了用户隔离。</p>
<h3><span id="git-chang-jian-wen-ti">Git常见问题</span></h3><h4><span id="permission-denied">Permission denied</span></h4><p>这是遇到的最常见问题，网上有很多解决方案，比较常见的是清空<code>.deploy_git</code>文件夹，然后重新生成，实际上这样的方案很蠢。<br>遇到这个错误，首先要做的是进行错误定位，测试问题出在哪儿：<br><code>ssh -T git@目标主机</code><br>如果提示验证成功，比如Gitea会提示：    </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">Hi there, You<span class="string">'ve successfully authenticated, but Gitea does not provide shell access.</span></div><div class="line">If this is unexpected, please log in with password and setup Gitea under another user.</div></pre></td></tr></table></figure>
<p>说明你的ssh key并没有问题。<br>这时候需要检查<code>~/.ssh</code>目录下的<code>config</code>配置文件，这个配置文件是为了存在多个ssh key时进行ssh key管理的。<br><code>config</code>的配置规则如下：    </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">Host hostname  <span class="comment">#识别id，既在ssh命令时链接的地址标记</span></div><div class="line">HostName www.xxx.com</div><div class="line">Port 22</div><div class="line">User root <span class="comment">#这里记得修改为git用户</span></div><div class="line">IdentityFile ~/.ssh/xxx  <span class="comment">#指定文件</span></div></pre></td></tr></table></figure>
<p>可以在<code>config</code>文件中配置多个。<br>检查没有问题后，而依然出现这种问题的，大多数是同步了目录，在其他电脑上重新部署，希望多个地点更新hexo存在的问题，发生这样的问题主要是因为git的配置文件引起的，可以到<code>/.deploy_git/.git</code>目录中找到git的<code>config</code>文件进行检查，检查其中对<code>remote</code>的描述，是否同本地<code>ssh</code>中<code>config</code>中的<code>Host hostname</code>命名一致。</p>
<p>后来问题依旧，GOOGLE到了一个方案，解决了这个问题，在本机添加一下SSH KEY</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ ssh-add ~/.ssh/github_rsa</div></pre></td></tr></table></figure>
<p>关于这个问题，后来经过查资料，引起的主要原因是因为在执行生成发布服务的时候，前文用了<code>sudo</code>指令，这个命令只能临时的解决问题，所以要么把 <code>ssh-add</code>写到bash里，开启终端时自动完成，要么采用：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ ssh-add -K ~/.ssh/github_rsa</div></pre></td></tr></table></figure>
<p>指令，将sshkey储存到MAC的钥匙串管理中，这样当其他程序请求sshkey的时候会向Keychain请求秘钥。</p>
<h3><span id="yi-xie-you-qu-de-cha-jian">一些有趣的插件：</span></h3><p><a href="https://hexo.io/plugins/" target="_blank" rel="external">HEXO官方插件页面</a></p>
<p><strong>阿里云OSS插件</strong></p>
<p>不知道什么时候开始，OSS支持静态站点的托管，采用这个插件，可以将所有的静态页面托管在OSS里。<a href="https://github.com/yedaodao/hexo-deployer-aliyun" target="_blank" rel="external">戳我抵达</a></p>
</div><div class="post-footer"><div class="meta"><div class="info"><i class="fa fa-sun-o"></i><span class="date">2017-01-10</span><i class="fa fa-tag"></i><a href="/categories/Mac/" title="Mac" class="tag">Mac </a><a href="/tags/hexo/" title="hexo" class="tag">hexo </a><a href="/tags/macos/" title="macos" class="tag">macos </a></div></div></div></div><div class="mailcommint">请注意：我们关闭了评论，因为采用邮件或许交流速度更快。 Click ><a href="mailto:liuqichao@liuqichao.com?subject=Commint: Mac安装hexo爬坑" class="a">Send Mail</a></div><div class="share"><div class="evernote"><a href="javascript:(function(){EN_CLIP_HOST='http://www.evernote.com';try{var%20x=document.createElement('SCRIPT');x.type='text/javascript';x.src=EN_CLIP_HOST+'/public/bookmarkClipper.js?'+(new%20Date().getTime()/100000);document.getElementsByTagName('head')[0].appendChild(x);}catch(e){location.href=EN_CLIP_HOST+'/clip.action?url='+encodeURIComponent(location.href)+'&amp;title='+encodeURIComponent(document.title);}})();" ref="nofollow" target="_blank" class="fa fa-bookmark"></a></div><div class="weibo"><a href="javascript:void((function(s,d,e){try{}catch(e){}var f='http://service.weibo.com/share/share.php?',u=d.location.href,p=['url=',e(u),'&amp;title=',e(d.title),'&amp;appkey=2924220432'].join('');function a(){if(!window.open([f,p].join(''),'mb',['toolbar=0,status=0,resizable=1,width=620,height=450,left=',(s.width-620)/2,',top=',(s.height-450)/2].join('')))u.href=[f,p].join('');};if(/Firefox/.test(navigator.userAgent)){setTimeout(a,0)}else{a()}})(screen,document,encodeURIComponent));" class="fa fa-weibo"></a></div><div class="twitter"><a href="http://twitter.com/home?status=,https://www.kanshouce.com/2017/01/10/14841235616906/,手册,Mac安装hexo爬坑,;" class="fa fa-twitter"></a></div></div><div class="pagination"><ul class="clearfix"><li class="pre pagbuttons"><a role="navigation" href="/2017/01/11/Aboutamerica/" title="2016 America &amp; Europe travel notes" class="btn">上一篇</a></li></ul></div></div></div></div></div><script src="/js/jquery.js"></script><script src="/js/jquery-migrate-1.2.1.min.js"></script><script src="/js/jquery.appear.js"></script><script src="/js/custom.js"></script></body></html>