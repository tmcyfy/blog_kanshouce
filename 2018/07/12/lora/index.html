<!DOCTYPE html><html lang="zh-CN"><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><meta name="author" content="Louis,liuqichao@liuqichao.com"><title>使用Dreamcatcher 3 LoRa建立无线电聊天 · 手册</title><meta name="description" content="Outernet提供了一个在Dreamcatcher 3上运行的LoRa双向开源文本聊天应用程序。
聊天程序依赖硬件板，所以需要两个Dreamcatcher 3硬件板。

通过该这个程序，可以在电路板之间实时聊天。业余无线电爱好者可能对这些电路板感兴趣（或者某些潮流Geek们），包括那些在短期内可能"><meta name="keywords" content="Life,HTML,CSS,android,Linux"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="renderer" content="webkit"><link rel="short icon" href="/images/favicon.png" type="image/x-icon"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/blog_basic.css"><link rel="stylesheet" href="/css/font-awesome.min.css"><link rel="alternate" type="application/atom+xml" title="ATOM 1.0" href="/atom.xml"></head><body><div class="sidebar animated fadeInDown"><div class="logo-title"><div class="title"><img src="/images/logo@2x.png" style="width:127px;"><h3 title=""><a href="/">手册</a></h3><div class="description"><p>Nothing lasts forever.</p></div></div></div><ul class="social-links"><li><a href="/atom.xml"><i class="fa fa-rss"></i></a></li></ul><div class="footer"><div class="by_farbox"><a href="#">粤ICP备13034981号-2</a><div class="by_farbox"></div><sine>2016</sine></div></div></div><div class="main"><div class="page-top animated fadeInDown"><div class="nav"><li><a href="/">首页</a></li><li><a href="/about">关于</a></li><li><a href="/archives">归档</a></li><li><a href="/links">友链</a></li><li><a href="/reader">阅读者</a></li><li><a href="/node">Node</a></li></div><div class="information"><div class="back_btn"><li><a onclick="window.history.go(-1)" class="fa fa-chevron-left"> </a></li></div><div class="avatar"><img src="/images/favicon.png"></div></div></div><div class="autopagerize_page_element"><div class="content"><div class="post-page"><div class="post animated fadeInDown"><div class="post-title"><h3><a>使用Dreamcatcher 3 LoRa建立无线电聊天</a></h3></div><div class="post-content"><p>Outernet提供了一个在Dreamcatcher 3上运行的<a href="https://github.com/Outernet-Project/Dreamcatcher-Packet-Tester" target="_blank" rel="external">LoRa双向开源文本聊天应用程序</a>。</p>
<p>聊天程序依赖硬件板，所以需要两个Dreamcatcher 3硬件板。</p>
<a id="more"></a>
<p>通过该这个程序，可以在电路板之间实时聊天。业余无线电爱好者可能对这些电路板感兴趣（或者某些潮流Geek们），包括那些在短期内可能希望获得加密聊天的用户（虽然这玩意儿没加密）。</p>
<p>Outernet在推广的过程中没有特别宣传他们的广播传输功能，因为这块硬件板没有经过FCC认可，所以它不能合法地用作传输和收听LoRa IoT传感器的ISM频段LoRa设备。但是如果你能确保输出干净合法并且在火腿带上，你可以用火腿传送它。</p>
<p><img src="https://ws1.sinaimg.cn/large/006tKfTcgy1ft7b0wzsuhj30rs0v9q8c.jpg" alt=""></p>
<h2><span id="dreamcatcher-v3-0">Dreamcatcher v3.0</span></h2><p>我们找到了两个Dreamcatcher 3板来测试聊天应用程序。</p>
<p>与之前的版本一样，Dreamcatcher是一个内置无线电的完整计算板。除了这个时间而不是RTL-SDR，无线电是硬件LoRa模块。另一个区别是现在有一个内置的液晶屏。</p>
<p>在电路板上有两个SMA端口，一个标记为“Direct”，另一个标记为“LNB”。直接端口是我们需要用于聊天应用程序的端口，因为这是可以传输的端口。还有两个SD卡插槽，一个用于操作系统，一个用于存储，麦克风和耳机插孔，带有WiFi适配器的USB-A插槽，以及两个USB微插槽，一个用于USB OTG，另一个用于电源。</p>
<p>该套件还配有一个LNB，旨在与Outernet卫星服务一起使用。LNB仅接收，因此不能与聊天应用程序一起使用，因此如果尝试使用LoRa发射器，则需要使用自己的天线。</p>
<h2><span id="liao-tian-she-zhi-he-shi-yong">聊天设置和使用</span></h2><p>首先，我们将最新版本的<a href="https://archive.outernet.is/Dreamcatcher3%20Armbian/" target="_blank" rel="external">Dreamcatcher Armbian OS刻录</a>到两个SD卡上，并在每个板中插入一个。由于Dreamcatcher 3具有内置LCD屏幕，您可以通过屏幕登录和访问终端。但由于只有一个USB端口可用，您需要一个USB集线器才能插入鼠标和键盘，以及随附的USB WiFi适配器。或者，如果将USB OTG端口连接到PC，则可以通过USB串行连接与其连接。</p>
<p>聊天软件可在<a href="https://github.com/Outernet-Project/Dreamcatcher-Packet-Tester。" target="_blank" rel="external">GitHub上获得</a>，要安装它，只需在Dreamcatcher的终端上运行以下命令：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">sudo apt update</div><div class="line">sudo apt install libsoc-dev libsoc2</div><div class="line">git <span class="built_in">clone</span> https://github.com/Outernet-Project/Dreamcatcher-Packet-Tester</div><div class="line">make</div></pre></td></tr></table></figure>
<p>编译完成后，可以用命令启动聊天程序：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">sudo ./chat</div></pre></td></tr></table></figure>
<h2><span id="shi-yong-lora-she-zhi">使用LoRa设置</span></h2><p>默认情况下，实际RF输出频率硬编码为2.4 GHz。如果要更改它，可以使用基于终端的文本编辑器（如nano）编辑main.cpp文件，并查找<code>#define RF_FREQUENCY</code>条目。然后，您需要通过再次运行<code>&#39;make&#39;</code>来重新编译。但请注意，在本文发布时，根据Outernet，该软件仅在2.4 GHz左右正常工作。显然这只是一个软件限制，一旦修复，你应该能够在85 MHz到5400 MHz之间的任何频率上进行传输。</p>
<p>此外，默认情况下，<code>LoRa&#39;Spreading Factor&#39;</code>设置为最大值12.这意味着在发送消息和在另一个消息上接收消息之间大约有1秒的延迟。</p>
<p>也可以通过编辑<code>“modulationParams.Params.LoRa.SpreadingFactor”</code>变量在代码中调整扩展项。这决定了数据包在时间上的分散程度。较大的扩展项导致更稳健的无差错通信，而较小的因素导致较低的延迟。下面是代码的一些有效扩展项条目。</p>
<p>请注意，如果减少扩展项，还需要减少<code>RX_TIMEOUT_VALUE</code>和<code>TX_TIMEOUT_VALUE #defines</code>（需要在代码中搜索这些行。提示：在Nano CTRL + W中搜索。）。对于扩展项<code>7</code>，100ms的超时效果很好。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">LORA_SF5 </div><div class="line">LORA_SF6 </div><div class="line">LORA_SF7 </div><div class="line">LORA_SF8 </div><div class="line">LORA_SF9 </div><div class="line">LORA_SF10 </div><div class="line">LORA_SF11 </div><div class="line">LORA_SF12</div></pre></td></tr></table></figure>
<p>也可以使用<code>“modulationParams.Params.LoRa.Bandwidth”</code>变量上的以下代码将带宽从200 kHz调整到1600 kHz。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">LORA_BW_0200 </div><div class="line">LORA_BW_0400 </div><div class="line">LORA_BW_0800 </div><div class="line">LORA_BW_1600</div></pre></td></tr></table></figure>
<p>LoRa’编码率’也可以通过<code>“modulationParams.Params.LoRa.CodingRate”</code>变量进行更改。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">LORA_CR_4_5 </div><div class="line">LORA_CR_4_6 </div><div class="line">LORA_CR_4_7 </div><div class="line">LORA_CR_4_8 </div><div class="line">LORA_CR_LI_4_5 </div><div class="line">LORA_CR_LI_4_6 </div><div class="line">LORA_CR_LI_4_7</div></pre></td></tr></table></figure>
<p>还可以通过调整<code>#define TX_OUTPUT_POWER</code>指定的值来调整TX输出功率。默认情况下，它设置为最大输出功率13 dBm。可用的最低值为-18 dBm。 </p>
<p>请记住，在<code>main.cpp</code>文件中进行更改后，您必须通过运行<code>&#39;make&#39;</code>重新编译聊天程序。</p>
<p>下面我们用HackRF可视化不同的LoRa扩展项。看看扩频项如何改变数据包传输时间很有意思。</p>
<p><img src="https://ws4.sinaimg.cn/large/006tKfTcgy1ft7ba48uqij30dr0fkgnv.jpg" alt=""></p>
</div><div class="post-footer"><div class="meta"><div class="info"><i class="fa fa-sun-o"></i><span class="date">2018-07-12</span><i class="fa fa-tag"></i><a href="/categories/SDR/" title="SDR" class="tag">SDR </a><a href="/tags/SDR/" title="SDR" class="tag">SDR </a><a href="/tags/Chat/" title="Chat" class="tag">Chat </a></div></div></div></div><div class="mailcommint">请注意：我们关闭了评论，因为采用邮件或许交流速度更快。 Click ><a href="mailto:liuqichao@liuqichao.com?subject=Commint: 使用Dreamcatcher 3 LoRa建立无线电聊天" class="a">Send Mail</a></div><div class="share"><div class="evernote"><a href="javascript:(function(){EN_CLIP_HOST='http://www.evernote.com';try{var%20x=document.createElement('SCRIPT');x.type='text/javascript';x.src=EN_CLIP_HOST+'/public/bookmarkClipper.js?'+(new%20Date().getTime()/100000);document.getElementsByTagName('head')[0].appendChild(x);}catch(e){location.href=EN_CLIP_HOST+'/clip.action?url='+encodeURIComponent(location.href)+'&amp;title='+encodeURIComponent(document.title);}})();" ref="nofollow" target="_blank" class="fa fa-bookmark"></a></div><div class="weibo"><a href="javascript:void((function(s,d,e){try{}catch(e){}var f='http://service.weibo.com/share/share.php?',u=d.location.href,p=['url=',e(u),'&amp;title=',e(d.title),'&amp;appkey=2924220432'].join('');function a(){if(!window.open([f,p].join(''),'mb',['toolbar=0,status=0,resizable=1,width=620,height=450,left=',(s.width-620)/2,',top=',(s.height-450)/2].join('')))u.href=[f,p].join('');};if(/Firefox/.test(navigator.userAgent)){setTimeout(a,0)}else{a()}})(screen,document,encodeURIComponent));" class="fa fa-weibo"></a></div><div class="twitter"><a href="http://twitter.com/home?status=,https://www.kanshouce.com/2018/07/12/lora/,手册,使用Dreamcatcher 3 LoRa建立无线电聊天,;" class="fa fa-twitter"></a></div></div><div class="pagination"><ul class="clearfix"><li class="next pagbuttons"><a role="navigation" href="/2018/04/03/eth-whitebook/" title="Ethereum以太坊白皮书 中文译版" class="btn">下一篇</a></li></ul></div></div></div></div></div><script src="/js/jquery.js"></script><script src="/js/jquery-migrate-1.2.1.min.js"></script><script src="/js/jquery.appear.js"></script><script src="/js/custom.js"></script></body></html>